{"ast":null,"code":"import _regeneratorRuntime from\"/home/slinky/course_work/stranger_things_project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/slinky/course_work/stranger_things_project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import React,{useEffect,useState}from'react';import{Link}from'react-router-dom';import{BASE_URL}from'../constants';//TO DO\n// - When the user is logged in, let them see their own posts (after fixing NewPosts)\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function userData(){return _userData.apply(this,arguments);}function _userData(){_userData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var token,response,result,userName;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:token=localStorage.getItem('token');_context.next=3;return fetch(BASE_URL+'users/me',{headers:{'Content-Type':'application/json','Authorization':\"BEARER \"+token}});case 3:response=_context.sent;_context.next=6;return response.json();case 6:result=_context.sent;userName=result.data.username;localStorage.setItem(\"username\",userName);case 9:case\"end\":return _context.stop();}}},_callee);}));return _userData.apply(this,arguments);}function logout(){fetch(BASE_URL+'/users/login',{method:\"POST\",headers:{'Content-Type':'application/json'},body:JSON.stringify({user:{username:'',password:''}})});localStorage.removeItem(\"token\");localStorage.removeItem(\"username\");}var Home=function Home(_ref){var isLoggedIn=_ref.isLoggedIn,history=_ref.history;var token=localStorage.getItem(\"token\");var username=localStorage.getItem(\"username\");useEffect(function(){userData();},[]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Welcome to Stranger's Things!\"}),/*#__PURE__*/_jsxs(\"h3\",{children:[\"Logged in as \",username]}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){logout();},children:\"Logout\"})]});};export default Home;","map":{"version":3,"sources":["/home/slinky/course_work/stranger_things_project/src/components/Home.js"],"names":["React","useEffect","useState","Link","BASE_URL","userData","token","localStorage","getItem","fetch","headers","response","json","result","userName","data","username","setItem","logout","method","body","JSON","stringify","user","password","removeItem","Home","isLoggedIn","history"],"mappings":"2UAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,OAASC,QAAT,KAAyB,cAAzB,CAEA;AACA;gGACeC,CAAAA,Q,kIAAf,sKACUC,KADV,CACkBC,YAAY,CAACC,OAAb,CAAqB,OAArB,CADlB,uBAE2BC,CAAAA,KAAK,CAACL,QAAQ,CAAG,UAAZ,CAAwB,CAChDM,OAAO,CAAE,CACL,eAAgB,kBADX,CAEL,gBAAiB,UAAYJ,KAFxB,CADuC,CAAxB,CAFhC,QAEUK,QAFV,qCAQyBA,CAAAA,QAAQ,CAACC,IAAT,EARzB,QAQUC,MARV,eASUC,QATV,CASqBD,MAAM,CAACE,IAAP,CAAYC,QATjC,CAUIT,YAAY,CAACU,OAAb,CAAqB,UAArB,CAAiCH,QAAjC,EAVJ,sD,2CAaA,QAASI,CAAAA,MAAT,EAAiB,CACbT,KAAK,CAACL,QAAQ,CAAE,cAAX,CAA2B,CAC5Be,MAAM,CAAE,MADoB,CAE5BT,OAAO,CAAE,CACL,eAAgB,kBADX,CAFmB,CAK5BU,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CACjBC,IAAI,CAAE,CACNP,QAAQ,CAAE,EADJ,CAENQ,QAAQ,CAAE,EAFJ,CADW,CAAf,CALsB,CAA3B,CAAL,CAYAjB,YAAY,CAACkB,UAAb,CAAwB,OAAxB,EACAlB,YAAY,CAACkB,UAAb,CAAwB,UAAxB,EACH,CAED,GAAMC,CAAAA,IAAI,CAAG,QAAPA,CAAAA,IAAO,MAA2B,IAAzBC,CAAAA,UAAyB,MAAzBA,UAAyB,CAAbC,OAAa,MAAbA,OAAa,CACpC,GAAMtB,CAAAA,KAAK,CAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAd,CACA,GAAMQ,CAAAA,QAAQ,CAAGT,YAAY,CAACC,OAAb,CAAqB,UAArB,CAAjB,CAEAP,SAAS,CAAC,UAAM,CACZI,QAAQ,GACX,CAFQ,CAEN,EAFM,CAAT,CAIA,mBACI,oCACI,qDADJ,cAEI,sCAAkBW,QAAlB,GAFJ,cAGI,eAAQ,OAAO,CAAE,kBAAM,CAACE,MAAM,GAAG,CAAjC,oBAHJ,GADJ,CAOH,CAfD,CAiBA,cAAeQ,CAAAA,IAAf","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport { BASE_URL } from '../constants'\n\n//TO DO\n// - When the user is logged in, let them see their own posts (after fixing NewPosts)\nasync function userData(){\n    const token = localStorage.getItem('token')\n    const response = await fetch(BASE_URL + 'users/me', {\n        headers: {\n            'Content-Type': 'application/json',\n            'Authorization': \"BEARER \" + token,\n        },\n        })\n    const result = await response.json();\n    const userName = result.data.username\n    localStorage.setItem(\"username\", userName)\n}\n\nfunction logout(){\n    fetch(BASE_URL +'/users/login', {\n        method: \"POST\",\n        headers: {\n            'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n            user: {\n            username: '',\n            password: ''\n            }\n        })\n    })\n    localStorage.removeItem(\"token\")\n    localStorage.removeItem(\"username\")\n}\n\nconst Home = ({isLoggedIn, history}) => {\n    const token = localStorage.getItem(\"token\")\n    const username = localStorage.getItem(\"username\")\n\n    useEffect(() => {\n        userData()\n    }, []);\n\n    return (\n        <div>\n            <h2>Welcome to Stranger's Things!</h2>\n            <h3>Logged in as {username}</h3>\n            <button onClick={() => {logout()}}>Logout</button>\n        </div>\n    )\n}\n\nexport default Home;"]},"metadata":{},"sourceType":"module"}