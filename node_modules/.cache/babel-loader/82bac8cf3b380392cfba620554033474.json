{"ast":null,"code":"import _regeneratorRuntime from\"/home/slinky/course_work/stranger_things_project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _toConsumableArray from\"/home/slinky/course_work/stranger_things_project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/home/slinky/course_work/stranger_things_project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _asyncToGenerator from\"/home/slinky/course_work/stranger_things_project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";//NOTE\n// - This component is not loading on the homepage for some reason\nimport React,{useEffect,useState}from\"react\";import{BASE_URL}from'../constants';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var NewPosts=function NewPosts(_ref){var isLoggedIn=_ref.isLoggedIn;console.log(\"heyo\");var postsUrl=BASE_URL+'/posts';// const axios = require('axios').default;\nfunction getPosts(_x){return _getPosts.apply(this,arguments);}function _getPosts(){_getPosts=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(setPosts){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:// const posts = await axios.get(postsUrl);\nfetch(BASE_URL+'/posts').then(function(response){return response.json();}).then(function(result){console.log(result);}).catch(console.error);setPosts(result.data.posts);case 2:case\"end\":return _context2.stop();}}},_callee2);}));return _getPosts.apply(this,arguments);}useEffect(function(){getPosts();},[]);function makeHeaders(token){//if token is not null\nreturn{'Content-Type':'application/json','Authorization':'Bearer'+token};//else\nreturn{'Content-Type':'application/json'};}var _useState=useState([]),_useState2=_slicedToArray(_useState,2),posts=_useState2[0],setPosts=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),title=_useState4[0],setTitle=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),description=_useState6[0],setDescription=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),price=_useState8[0],setPrice=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),location=_useState10[0],setLocation=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),willDeliver=_useState12[0],setWillDeliver=_useState12[1];return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\" Create a new post \"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var response,_result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();_context.prev=1;_context.next=4;return fetch(postsUrl,{method:'POST',header:makeHeaders(token),body:JSON.stringify({title:title,description:description,price:price,location:location,willDeliver:willDeliver})});case 4:response=_context.sent;_context.next=7;return response.json();case 7:_result=_context.sent;setPosts([].concat(_toConsumableArray(posts),[_result.data.name]));_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](1);console.error(_context.t0);case 14:case\"end\":return _context.stop();}}},_callee,null,[[1,11]]);}));return function(_x2){return _ref2.apply(this,arguments);};}(),children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"title\",value:title,onChange:function onChange(event){setTitle(event.target.value);}}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"description\",value:description,onChange:function onChange(event){setDescription(event.target.value);}}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"price\",value:price,onChange:function onChange(event){setPrice(event.target.value);}}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"location\",value:location,onChange:function onChange(event){setLocation(event.target.value);}}),/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",value:willDeliver,onChange:function onChange(event){setWillDeliver(event.target.value);},children:\"Will Deliver?\"})]})]});};export default NewPosts;","map":{"version":3,"sources":["/home/slinky/course_work/stranger_things_project/src/components/NewPosts.js"],"names":["React","useEffect","useState","BASE_URL","NewPosts","isLoggedIn","console","log","postsUrl","getPosts","setPosts","fetch","then","response","json","result","catch","error","data","posts","makeHeaders","token","title","setTitle","description","setDescription","price","setPrice","location","setLocation","willDeliver","setWillDeliver","event","preventDefault","method","header","body","JSON","stringify","name","target","value"],"mappings":"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","sourcesContent":["//NOTE\n// - This component is not loading on the homepage for some reason\n\nimport React, { useEffect, useState } from \"react\";\nimport { BASE_URL } from '../constants'\n\nconst NewPosts = ({isLoggedIn}) => {\n    console.log(\"heyo\")\n    const postsUrl = BASE_URL + '/posts'\n    // const axios = require('axios').default;\n\n    async function getPosts(setPosts){\n        // const posts = await axios.get(postsUrl);\n        fetch(BASE_URL + '/posts')\n        .then(response => response.json())\n        .then(result => {\n            console.log(result);\n        })\n        .catch(console.error);\n        setPosts(result.data.posts)\n    }\n\n    useEffect(() => {\n        getPosts();\n    }, [])\n\n    function makeHeaders(token) {\n        //if token is not null\n        return {\n            'Content-Type': 'application/json',\n            'Authorization': 'Bearer' + token\n        }\n        //else\n        return {\n            'Content-Type': 'application/json'\n        }\n    }\n\n    const [posts, setPosts] = useState([]);\n    const [title, setTitle] = useState(\"\");\n    const [description, setDescription] = useState(\"\");\n    const [price, setPrice] = useState(\"\");\n    const [location, setLocation] = useState(\"\");\n    const [willDeliver, setWillDeliver] = useState(false)\n\n    return (<div>\n        <h1> Create a new post </h1>\n        <form\n            onSubmit={async (event) => {\n                event.preventDefault();\n                try {\n                    const response = await fetch(\n                        postsUrl, \n                        {\n                            method: 'POST',\n                            header: makeHeaders(token),\n                            body: JSON.stringify({\n                                title,\n                                description,\n                                price,\n                                location,\n                                willDeliver,\n                            }),\n                        }\n                    );\n                    const result = await response.json();\n                    setPosts([\n                        ...posts,\n                        result.data.name\n                    ])\n                } catch (err) {\n                    console.error(err);\n                }\n            }}\n            >\n            \n            <input\n                type='text'\n                placeholder='title'\n                value={title}\n                onChange={(event) => {\n                    setTitle(event.target.value)\n                }}\n            >\n            </input>\n            <input\n                type='text'\n                placeholder='description'\n                value={description}\n                onChange={(event) => {\n                    setDescription(event.target.value)\n                }}\n            >\n            </input>\n            <input\n                type='text'\n                placeholder='price'\n                value={price}\n                onChange={(event) => {\n                    setPrice(event.target.value)\n                }}\n            >\n            </input>\n            <input\n                type='text'\n                placeholder='location'\n                value={location}\n                onChange={(event) => {\n                    setLocation(event.target.value)\n                }}\n            >\n            </input>\n            <input\n                type='checkbox'\n                value={willDeliver}\n                onChange={(event) => {\n                    setWillDeliver(event.target.value)\n                }}\n            >Will Deliver?\n            </input>\n        </form>\n    </div>\n    )\n}\n\nexport default NewPosts;"]},"metadata":{},"sourceType":"module"}